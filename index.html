<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Typing Flow</title>
  <style>
    :root{--bg-color:#0d1117;--text-color:#c9d1d9;--accent-color:#58a6ff;--correct-color:#2ea043;--wrong-color:#f85149;--button-bg:#21262d;--button-hover:#30363d}
    body.light{--bg-color:#f4f4f4;--text-color:#1f2937;--accent-color:#2563eb;--button-bg:#e5e7eb;--button-hover:#d1d5db}
    body{margin:0;background-color:var(--bg-color);color:var(--text-color);font-family:'Segoe UI',sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;flex-direction:column;padding:16px}
    .button{padding:12px 24px;margin:8px;border:none;border-radius:12px;background-color:var(--button-bg);color:var(--text-color);font-size:1rem;cursor:pointer;transition:background 0.2s}
    .button:hover{background-color:var(--button-hover)}
    .active{outline:2px solid var(--accent-color)}
    .word{font-size:2rem;display:flex;justify-content:center;flex-wrap:wrap;margin-bottom:12px}
    .letter{padding:0 2px}
    .correct{color:var(--correct-color)}
    .wrong{color:var(--wrong-color)}
    .counter{font-family:monospace;font-size:1.2rem;margin-top:16px;color:var(--accent-color)}
    @media (max-width:600px){.word{font-size:1.5rem}.button{width:100%}}
    #nukeMessage{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);font-size:2em;text-align:center}
  </style>
</head>
<body>
  <div id="menu">
    <h1 style="text-align:center">Typing Flow</h1>
    <div style="display:flex;flex-wrap:wrap;justify-content:center">
      <button class="button" id="tr">Türkçe</button>
      <button class="button" id="en">English</button>
    </div>
    <div style="display:flex;flex-wrap:wrap;justify-content:center">
      <button class="button" id="start">Başlat</button>
      <button class="button" id="themeToggle">Tema Değiştir</button>
    </div>
  </div>

  <div id="game" style="display:none;text-align:center">
    <div class="word" id="currentWord"></div>
    <p style="color:gray;font-size:0.9rem">(Boşluk tuşuna bastığında kontrol edilir)</p>
    <div class="counter">Doğru Yazılan: <span id="counter">0</span></div>
  </div>
  <div id="nukeMessage">İZİNSİZ ERİŞİM ENGELLENDİ!</div>

<script>
(function(){const n=()=>{document.body.innerHTML='',document.body.style.background='black',document.getElementById('nukeMessage').style.display='block',setInterval(()=>window.location.reload(),500)},a=()=>{const e=document.createElement('div');e.innerHTML=' ',e.className='adsbox',document.body.appendChild(e),setTimeout(()=>{0===e.offsetHeight&&n(),e.remove()},50)},c=e=>{const t=[e.ctrlKey&&'i'===e.key,e.ctrlKey&&'j'===e.key,e.ctrlKey&&'c'===e.key,e.shiftKey&&e.ctrlKey&&'c'===e.key,'f12'===e.key,e.metaKey&&e.altKey&&'i'===e.key];t.some(t=>t)&&(e.preventDefault(),e.stopPropagation(),n())};setInterval(()=>{try{(window.outerWidth-window.innerWidth>200||window.outerHeight-window.innerHeight>200||/firebug|webinspector|chromelogging|blackbox|\.apply\(|debugger|toString\.\(\+\)/.test(document.body.innerHTML))&&n(),a()}catch(e){n()}},300),document.addEventListener('contextmenu',e=>e.preventDefault()),document.addEventListener('keydown',c),Object.defineProperty(window,'console',{value:new Proxy(console,{get:(e,t)=>{return'log'===t||'debug'===t?()=>{}:e[t]}}))})();

let turkishWords=[],englishWords=[],currentWord="",wordList=[],buffer="",correctCount=0,usedWords=[];
const trBtn=document.getElementById("tr"),enBtn=document.getElementById("en"),startBtn=document.getElementById("start"),themeToggle=document.getElementById("themeToggle"),menu=document.getElementById("menu"),game=document.getElementById("game"),currentWordEl=document.getElementById("currentWord"),counterEl=document.getElementById("counter");
let lang="tr";
trBtn.onclick=()=>{lang="tr",trBtn.classList.add("active"),enBtn.classList.remove("active")};
enBtn.onclick=()=>{lang="en",enBtn.classList.add("active"),trBtn.classList.remove("active")};
themeToggle.onclick=()=>{document.body.classList.toggle("light")};
startBtn.onclick=()=>{wordList=lang==="tr"?turkishWords:englishWords;if(wordList.length===0){alert("Kelime listesi yüklenemedi.");return}menu.style.display="none",game.style.display="block",correctCount=0,buffer="",usedWords=[],counterEl.textContent="0",updateWord()};
function getRandomWord(){if(usedWords.length>=20&&(usedWords=[]),availableWords=wordList.filter(word=>!usedWords.includes(word)),availableWords.length===0){usedWords=[];return wordList[Math.floor(Math.random()*wordList.length)]}const randomIndex=Math.floor(Math.random()*availableWords.length),selectedWord=availableWords[randomIndex];return usedWords.push(selectedWord),selectedWord}
function updateWord(){currentWord=getRandomWord(),renderWord()}
function renderWord(){currentWordEl.innerHTML="";for(let i=0;i<currentWord.length;i++){const e=document.createElement("span");e.textContent=currentWord[i],e.classList.add("letter"),buffer[i]&&e.classList.add(buffer[i]===currentWord[i]?"correct":"wrong"),currentWordEl.appendChild(e)}}
window.addEventListener("keydown",e=>{if(game.style.display==="block")if(" "===e.key){e.preventDefault(),buffer.trim()===currentWord&&correctCount++,counterEl.textContent=correctCount,buffer="",updateWord()}else if(/^[a-zA-ZçÇğĞıİöÖşŞüÜ]$/.test(e.key))buffer+=e.key,renderWord();else if("Backspace"===e.key&&(buffer=buffer.slice(0,-1),renderWord())});
async function loadWords(){try{const e=await fetch('turkce.txt'),t=await fetch('english.txt');turkishWords=(await e.text()).split('\n').map(e=>e.trim()).filter(e=>e),englishWords=(await t.text()).split('\n').map(e=>e.trim()).filter(e=>e)}catch(e){console.error("Dosyalar yüklenemedi",e)}}loadWords();
</script>
</body>
</html>